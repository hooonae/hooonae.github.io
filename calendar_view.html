<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“… ì§€í‚´ì´ ì¼ì • ê´€ë¦¬</title>

    <!-- Pikaday CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pikaday/pikaday.min.css">

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            text-align: center;
            background: #F8F1E9;
            padding: 20px;
            margin: 0;
        }

        h1 {
            color: #333;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .calendar-container {
            max-width: 100%;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .input-container {
            margin-bottom: 10px;
        }

        input[type="text"] {
            padding: 12px;
            width: 90%;
            margin: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        button {
            background-color: #007bff;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }

        button:hover {
            background-color: #0056b3;
        }

        .color-picker {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .color-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: none;
            margin: 0 8px;
            cursor: pointer;
        }

        /* ëª¨ë°”ì¼ ìµœì í™” */
        @media screen and (max-width: 768px) {
            .color-picker {
                margin-bottom: 15px;
            }
            .calendar-container {
                padding: 10px;
            }
            h1 {
                font-size: 20px;
            }
            input[type="text"], button {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <h1>ğŸ“… ì§€í‚´ì´ ì¼ì • ê´€ë¦¬</h1>

    <!-- ìƒ‰ìƒ ì„ íƒ -->
    <div class="color-picker">
        <button class="color-btn" style="background: black;" onclick="setColor('black')"></button>
        <button class="color-btn" style="background: red;" onclick="setColor('red')"></button>
        <button class="color-btn" style="background: blue;" onclick="setColor('blue')"></button>
        <button class="color-btn" style="background: green;" onclick="setColor('green')"></button>
    </div>

    <div class="calendar-container">
        <div class="input-container">
            <input type="text" id="datepicker" placeholder="ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”">
        </div>

        <div class="input-container">
            <input type="text" id="textInput" placeholder="ì¼ì •ì— ëŒ€í•œ ì¶”ê°€ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        </div>

        <button onclick="submitData()">ì œì¶œ</button>
        <h3>ì €ì¥ëœ ì¼ì •</h3>
        <div id="saved-events"></div> <!-- Firebaseì—ì„œ ê°€ì ¸ì˜¨ ì´ë²¤íŠ¸ í‘œì‹œ -->
    </div>

    <!-- Pikaday JS -->
    <script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-database-compat.js"></script>

    <script>
        // Firebase ì„¤ì •
        const firebaseConfig = {
            apiKey: "AIzaSyAwXlQewHZxYLbZMkoKhm9HYsj6R8oPEpA",
            authDomain: "museum-web-370cd.firebaseapp.com",
            databaseURL: "https://museum-web-370cd-default-rtdb.firebaseio.com",
            projectId: "museum-web-370cd",
            messagingSenderId: "154810876093",
            appId: "1:154810876093:web:d9cc427254abfb609e37d4"
        };

        // Firebase ì´ˆê¸°í™”
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let selectedColor = "black"; // ì´ˆê¸° ìƒ‰ìƒ ì„¤ì •

        // ìƒ‰ìƒ ì„ íƒ í•¨ìˆ˜
        function setColor(color) {
            selectedColor = color;
        }

        // Pikaday ë‚ ì§œ ì„ íƒê¸°
        var picker = new Pikaday({
            field: document.getElementById('datepicker'),
            format: 'YYYY-MM-DD',
            minDate: new Date(), // ì˜¤ëŠ˜ ì´í›„ì˜ ë‚ ì§œë§Œ ì„ íƒ ê°€ëŠ¥
            maxDate: new Date(2025, 12, 31), // ìµœëŒ€ ë‚ ì§œ ì„¤ì •
        });

        // Firebaseì—ì„œ ì¼ì • ë¶ˆëŸ¬ì˜¤ê¸°
        function loadEvents() {
            const savedEventsDiv = document.getElementById("saved-events");
            savedEventsDiv.innerHTML = ""; // ì´ˆê¸°í™”

            const eventsRef = db.ref("events");
            eventsRef.once("value", function(snapshot) {
                snapshot.forEach(function(childSnapshot) {
                    const event = childSnapshot.val();
                    const eventElement = document.createElement("div");
                    eventElement.style.color = event.color;
                    eventElement.innerHTML = `<strong>${event.date}</strong>: ${event.name}`;
                    savedEventsDiv.appendChild(eventElement);
                });
            });
        }

        // ì œì¶œ ë²„íŠ¼ í´ë¦­ ì‹œ Firebaseì— ì €ì¥í•˜ê³  í™”ë©´ì— ë°˜ì˜
        function submitData() {
            const selectedDate = document.getElementById('datepicker').value;
            const text = document.getElementById('textInput').value;

            if (selectedDate && text) {
                // Firebaseì— ì €ì¥
                const newEventRef = db.ref("events").push();
                newEventRef.set({
                    date: selectedDate,
                    name: text,
                    color: selectedColor
                });

                alert("ì¼ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
                loadEvents(); // ì €ì¥ëœ ì¼ì • ìƒˆë¡œê³ ì¹¨
            } else {
                alert("ë‚ ì§œì™€ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            }
        }

        // í˜ì´ì§€ ë¡œë”© ì‹œ Firebaseì—ì„œ ì´ë²¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
        window.onload = function() {
            loadEvents();
        };
    </script>

</body>
</html>

