<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📢 공지사항</title>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-database.js";

        const firebaseConfig = { /* 위와 동일한 설정 */ };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        function loadNotices() {
            const noticesList = document.getElementById("noticesList");
            noticesList.innerHTML = "<p>로딩 중...</p>";

            onValue(ref(db, "notices"), snapshot => {
                noticesList.innerHTML = "";
                snapshot.forEach(childSnapshot => {
                    const notice = childSnapshot.val();
                    let div = document.createElement("div");
                    div.classList.add("notice-card");
                    div.innerHTML = `
                        <h3>${notice.title}</h3>
                        <p>${notice.content}</p>
                        <small>${notice.date}</small>
                        <button onclick="deleteNotice('${childSnapshot.key}')">삭제</button>
                    `;
                    noticesList.appendChild(div);
                });
            });
        }

        function deleteNotice(noticeId) {
            remove(ref(db, `notices/${noticeId}`)).then(() => {
                alert("공지사항이 삭제되었습니다.");
                window.location.reload();
            });
        }

        window.onload = loadNotices;
    </script>
</head>
<body>

    <h1>📢 공지사항</h1>
    <button onclick="location.href='notice_form.html'">공지사항 작성</button>
    <div id="noticesList"></div>

</body>
</html>
