<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“¢ ê³µì§€ì‚¬í•­</title>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-database.js";

        const firebaseConfig = { /* ìœ„ì™€ ë™ì¼í•œ ì„¤ì • */ };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        function loadNotices() {
            const noticesList = document.getElementById("noticesList");
            noticesList.innerHTML = "<p>ë¡œë”© ì¤‘...</p>";

            onValue(ref(db, "notices"), snapshot => {
                noticesList.innerHTML = "";
                snapshot.forEach(childSnapshot => {
                    const notice = childSnapshot.val();
                    let div = document.createElement("div");
                    div.classList.add("notice-card");
                    div.innerHTML = `
                        <h3>${notice.title}</h3>
                        <p>${notice.content}</p>
                        <small>${notice.date}</small>
                        <button onclick="deleteNotice('${childSnapshot.key}')">ì‚­ì œ</button>
                    `;
                    noticesList.appendChild(div);
                });
            });
        }

        function deleteNotice(noticeId) {
            remove(ref(db, `notices/${noticeId}`)).then(() => {
                alert("ê³µì§€ì‚¬í•­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                window.location.reload();
            });
        }

        window.onload = loadNotices;
    </script>
</head>
<body>

    <h1>ğŸ“¢ ê³µì§€ì‚¬í•­</h1>
    <button onclick="location.href='notice_form.html'">ê³µì§€ì‚¬í•­ ì‘ì„±</button>
    <div id="noticesList"></div>

</body>
</html>
